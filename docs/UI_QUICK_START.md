# UI æ¡†æ¶å¿«é€Ÿå¼€å§‹

> **5 åˆ†é’Ÿå¿«é€Ÿä¸Šæ‰‹ Claude Agent SDK UI**

---

## ğŸš€ åŸºç¡€å®‰è£…å’Œé…ç½®

### 1. å®‰è£…ä¾èµ–

```bash
npm install claude-agent-sdk-ui @anthropic-ai/claude-agent-sdk
```

### 2. é…ç½®ç¯å¢ƒå˜é‡

åˆ›å»º `.env` æ–‡ä»¶:

```bash
ANTHROPIC_API_KEY=your_api_key_here
```

### 3. ç¼–å†™ä½ çš„ç¬¬ä¸€ä¸ªåº”ç”¨

**æœ€ç®€å•çš„æ–¹å¼ - ä¸€è¡Œä»£ç :**

```typescript
import { query } from '@anthropic-ai/claude-agent-sdk';
import { renderQuery } from 'claude-agent-sdk-ui';

// ğŸ‰ å°±è¿™ä¹ˆç®€å•!
await renderQuery(query({ prompt: 'ä½ å¥½,Claude!' }));
```

**å¸¦é…ç½®çš„æ–¹å¼:**

```typescript
import { query } from '@anthropic-ai/claude-agent-sdk';
import { renderQuery } from 'claude-agent-sdk-ui';

await renderQuery(
  query({
    prompt: 'è¯·å¸®æˆ‘åˆ†æä¸€ä¸‹å½“å‰ç›®å½•çš„æ–‡ä»¶ç»“æ„',
    options: {
      maxTurns: 10,
      allowedTools: ['Read', 'Grep', 'Glob'],
    }
  }),
  {
    theme: 'dark',              // ä¸»é¢˜: 'dark' | 'light'
    showTokenUsage: true,       // æ˜¾ç¤º Token ç»Ÿè®¡ï¼ˆé»˜è®¤å…³é—­ï¼‰
    showToolDetails: true,      // æ˜¾ç¤ºå·¥å…·è°ƒç”¨è¯¦æƒ…
    showToolContent: true,      // éœ€è¦æ—¶æ˜¾ç¤º content å­—æ®µï¼ˆé»˜è®¤éšè—ï¼‰
    maxOutputLines: 50,         // å·¥å…·è¾“å‡ºæœ€å¤§è¡Œæ•°
  }
);
```

---

## ğŸ¨ å¿«é€Ÿé¢„è§ˆ

è¿è¡Œä»£ç åï¼Œä½ å°†çœ‹åˆ°ï¼š

```
â•â•â•â•â•â•â•â•â•â•â• ğŸš€ SESSION INITIALIZED â•â•â•â•â•â•â•â•â•â•â•

â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ ğŸ“‹ Session Info â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ Session ID: 628c0fcf                              â”‚
â”‚ Model: claude-sonnet-4                            â”‚
â”‚ Working Dir: /Users/username/project              â”‚
â”‚ Permission: [â„¹ DEFAULT]                          â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯

[â„¹ INFO] ğŸ”§ Read

â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ {                                             â”‚
â”‚   "path": "package.json"                      â”‚
â”‚ }                                             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜

[âœ“ SUCCESS] âœ“ Read completed (0.5s)

â•â•â•â•â•â•â•â•â• âœ… EXECUTION COMPLETE â•â•â•â•â•â•â•â•â•â•
```

---

## ğŸ“š æ›´å¤šç¤ºä¾‹å’Œæ–‡æ¡£

- ğŸ¨ [è‡ªå®šä¹‰ä¸»é¢˜](./UI_RENDERER.md#è‡ªå®šä¹‰ä¸»é¢˜)
- ğŸ“– [å®Œæ•´ API æ–‡æ¡£](./UI_RENDERER.md)
- ğŸ”„ [ä»æ—§ç‰ˆè¿ç§»](./UI_MIGRATION_GUIDE.md)

---

## ğŸ—ï¸ æ¶æ„è¯´æ˜

> **æŠ€æœ¯å®ç°ç»†èŠ‚ï¼šåŸºäº React for CLIs çš„ UI æ¡†æ¶**

---

## âœ… å½“å‰è¿›åº¦ï¼ˆå·²å®Œæˆ 40%ï¼‰

### å·²å®Œæˆçš„å·¥ä½œ

#### 1ï¸âƒ£ åŸºç¡€è®¾æ–½ï¼ˆ100% âœ…ï¼‰
- âœ… æ‰€æœ‰ä¾èµ–å·²å®‰è£…ï¼ˆink, react, åŠç”Ÿæ€ç»„ä»¶ï¼‰
- âœ… TypeScript é…ç½®å®Œæˆï¼ˆæ”¯æŒ JSX/TSXï¼‰
- âœ… é¡¹ç›®ç›®å½•ç»“æ„åˆ›å»ºå®Œæ¯•

#### 2ï¸âƒ£ åŸºç¡€ UI ç»„ä»¶ï¼ˆ100% âœ…ï¼‰
æ‰€æœ‰ç»„ä»¶éƒ½å¯ä»¥ç›´æ¥ä½¿ç”¨ï¼

```tsx
import { Box, Badge, Divider, Spinner } from './src/ink-components/ui/index.js';
import { ThemeProvider, useTheme } from './src/hooks/useTheme.js';
```

**ç»„ä»¶åˆ—è¡¨**:
- âœ… `<Box>` - è¾¹æ¡†ç›’å­ï¼ˆ390 è¡Œ â†’ 120 è¡Œï¼Œå‡å°‘ 69%ï¼‰
- âœ… `<Badge>` - å¾½ç« ï¼ˆSUCCESS/ERROR/WARNING/INFOï¼‰
- âœ… `<Divider>` - åˆ†å‰²çº¿
- âœ… `<Spinner>` - åŠ è½½åŠ¨ç”»
- âœ… `<ThemeProvider>` - ä¸»é¢˜æä¾›è€…
- âœ… `useTheme()` Hook

**æµ‹è¯•éªŒè¯**: âœ… æ‰€æœ‰ç»„ä»¶æ¸²æŸ“æ­£å¸¸
```bash
npx tsx examples/ink-test/basic-components.tsx
```

---

## ğŸ“‹ å‰©ä½™å·¥ä½œï¼ˆè¿˜éœ€ 60%ï¼‰

### æ ¸å¿ƒä»»åŠ¡æ¸…å•

| ä»»åŠ¡ | é¢„è®¡æ—¶é—´ | ä¼˜å…ˆçº§ | çŠ¶æ€ |
|------|----------|--------|------|
| åˆ›å»ºæ¶ˆæ¯è·¯ç”±å™¨ | 2-3h | ğŸ”´ é«˜ | â³ å¾…åŠ |
| SystemMessage ç»„ä»¶ | 1-2h | ğŸ”´ é«˜ | â³ å¾…åŠ |
| AssistantMessage ç»„ä»¶ | 2-3h | ğŸ”´ é«˜ | â³ å¾…åŠ |
| ToolUseMessage ç»„ä»¶ | 1-2h | ğŸ”´ é«˜ | â³ å¾…åŠ |
| ToolResultMessage ç»„ä»¶ | 1-2h | ğŸ”´ é«˜ | â³ å¾…åŠ |
| FinalResult ç»„ä»¶ | 2-3h | ğŸ”´ é«˜ | â³ å¾…åŠ |
| InkRenderer ä¸»æ¸²æŸ“å™¨ | 3-4h | ğŸ”´ é«˜ | â³ å¾…åŠ |
| StreamRenderer æµå¼æ¸²æŸ“ | 3-4h | ğŸŸ¡ ä¸­ | â³ å¾…åŠ |
| API å…¼å®¹å±‚ | 2-3h | ğŸ”´ é«˜ | â³ å¾…åŠ |
| æµ‹è¯•å’Œä¼˜åŒ– | 4-5h | ğŸŸ¡ ä¸­ | â³ å¾…åŠ |

**æ€»è®¡å‰©ä½™å·¥ä½œé‡**: çº¦ 20-30 å°æ—¶

---

## ğŸš€ å¦‚ä½•ç»§ç»­

### æ–¹æ¡ˆ Aï¼šè‡ªå·±åŠ¨æ‰‹ï¼ˆæ¨èï¼‰

æŒ‰ç…§ `INK_REFACTOR_GUIDE.md` è¯¦ç»†æŒ‡å—é€æ­¥å®æ–½ï¼š

1. **é˜…è¯»æŒ‡å—** - èŠ± 30 åˆ†é’Ÿé€šè¯»ä¸€é
2. **ä»ç®€å•å¼€å§‹** - å…ˆå®ç° SystemMessage ç»„ä»¶ï¼ˆæœ€ç®€å•ï¼‰
3. **é€æ­¥æ¨è¿›** - æ¯å®Œæˆä¸€ä¸ªç»„ä»¶å°±æµ‹è¯•ä¸€æ¬¡
4. **ä¿æŒèŠ‚å¥** - æ¯å¤© 2-3 å°æ—¶ï¼Œä¸€å‘¨å†…å®Œæˆæ ¸å¿ƒåŠŸèƒ½

### æ–¹æ¡ˆ Bï¼šè¯·æˆ‘å¸®å¿™ï¼ˆå¿«é€Ÿï¼‰

ä½ å¯ä»¥åœ¨åç»­ä¼šè¯ä¸­è¯·æ±‚ï¼š
```
è¯·å¸®æˆ‘å®ç° SystemMessage ç»„ä»¶
```

æˆ–è€…ï¼š
```
ç»§ç»­å®Œæˆ Ink é‡æ„çš„ç¬¬ 3 é˜¶æ®µ
```

### æ–¹æ¡ˆ Cï¼šæ··åˆæ¨¡å¼ï¼ˆçµæ´»ï¼‰

- è‡ªå·±å®ç°ç®€å•ç»„ä»¶ï¼ˆSystemMessage, Badge ç­‰ï¼‰
- å¤æ‚éƒ¨åˆ†è¯·æˆ‘å¸®å¿™ï¼ˆStreamRenderer, ä¸»æ¸²æŸ“å™¨ï¼‰

---

## ğŸ“– æ–‡æ¡£å¯¼èˆª

### ä¸»è¦æ–‡æ¡£
- **`INK_REFACTOR_GUIDE.md`** - å®Œæ•´å®æ–½æŒ‡å—ï¼ˆå¿…è¯»ï¼ï¼‰
  - è¯¦ç»†çš„æ­¥éª¤è¯´æ˜
  - å®Œæ•´çš„ä»£ç ç¤ºä¾‹
  - å¸¸è§é—®é¢˜è§£ç­”
  - æœ€ä½³å®è·µ

### ä»£ç ä½ç½®

#### å·²å®Œæˆçš„ä»£ç 
```
src/
â”œâ”€â”€ ink-components/ui/     âœ… åŸºç¡€ UI ç»„ä»¶
â”‚   â”œâ”€â”€ Box.tsx           âœ… å·²å®Œæˆ
â”‚   â”œâ”€â”€ Badge.tsx         âœ… å·²å®Œæˆ
â”‚   â”œâ”€â”€ Divider.tsx       âœ… å·²å®Œæˆ
â”‚   â”œâ”€â”€ Spinner.tsx       âœ… å·²å®Œæˆ
â”‚   â””â”€â”€ index.tsx         âœ… å¯¼å‡ºæ–‡ä»¶
â”œâ”€â”€ hooks/
â”‚   â””â”€â”€ useTheme.tsx      âœ… ä¸»é¢˜ Hook
â””â”€â”€ examples/ink-test/
    â””â”€â”€ basic-components.tsx  âœ… æµ‹è¯•ç¤ºä¾‹
```

#### å¾…åˆ›å»ºçš„æ–‡ä»¶
```
src/
â”œâ”€â”€ ink-components/
â”‚   â”œâ”€â”€ message/          â³ æ¶ˆæ¯ç»„ä»¶ï¼ˆå¾…åˆ›å»ºï¼‰
â”‚   â”‚   â”œâ”€â”€ SystemMessage.tsx
â”‚   â”‚   â”œâ”€â”€ AssistantMessage.tsx
â”‚   â”‚   â”œâ”€â”€ ToolUseMessage.tsx
â”‚   â”‚   â”œâ”€â”€ ToolResultMessage.tsx
â”‚   â”‚   â””â”€â”€ FinalResult.tsx
â”‚   â””â”€â”€ layout/           â³ å¸ƒå±€ç»„ä»¶ï¼ˆå¯é€‰ï¼‰
â””â”€â”€ ink-renderer/         â³ æ¸²æŸ“å™¨ï¼ˆå¾…åˆ›å»ºï¼‰
    â”œâ”€â”€ MessageRouter.tsx
    â”œâ”€â”€ InkRenderer.tsx
    â””â”€â”€ StreamRenderer.tsx
```

---

## ğŸ¯ å»ºè®®çš„å®æ–½é¡ºåº

### ç¬¬ä¸€é˜¶æ®µï¼šæ ¸å¿ƒæ¶ˆæ¯æ¸²æŸ“ï¼ˆ1-2 å¤©ï¼‰
1. åˆ›å»º `MessageRouter.tsx`ï¼ˆ30 åˆ†é’Ÿï¼‰
2. å®ç° `SystemMessage.tsx`ï¼ˆ1 å°æ—¶ï¼‰
3. å®ç° `AssistantMessage.tsx`ï¼ˆ2 å°æ—¶ï¼‰
4. æµ‹è¯•åŸºæœ¬æ¸²æŸ“ï¼ˆ30 åˆ†é’Ÿï¼‰

### ç¬¬äºŒé˜¶æ®µï¼šå·¥å…·è°ƒç”¨æ”¯æŒï¼ˆ1 å¤©ï¼‰
1. å®ç° `ToolUseMessage.tsx`ï¼ˆ1 å°æ—¶ï¼‰
2. å®ç° `ToolResultMessage.tsx`ï¼ˆ1 å°æ—¶ï¼‰
3. å®ç° `FinalResult.tsx`ï¼ˆ2 å°æ—¶ï¼‰
4. é›†æˆæµ‹è¯•ï¼ˆ1 å°æ—¶ï¼‰

### ç¬¬ä¸‰é˜¶æ®µï¼šä¸»æ¸²æŸ“å™¨ï¼ˆ1 å¤©ï¼‰
1. åˆ›å»º `InkRenderer.tsx`ï¼ˆ3 å°æ—¶ï¼‰
2. æ›´æ–° `src/index.ts` APIï¼ˆ1 å°æ—¶ï¼‰
3. å®Œæ•´ä¼šè¯æµ‹è¯•ï¼ˆ1 å°æ—¶ï¼‰

### ç¬¬å››é˜¶æ®µï¼šé«˜çº§ç‰¹æ€§ï¼ˆ1-2 å¤©ï¼‰
1. å®ç° `StreamRenderer.tsx`ï¼ˆ3 å°æ—¶ï¼‰
2. æ€§èƒ½ä¼˜åŒ–ï¼ˆ2 å°æ—¶ï¼‰
3. è¾¹ç¼˜æ¡ˆä¾‹å¤„ç†ï¼ˆ2 å°æ—¶ï¼‰

---

## ğŸ’¡ å¿«é€Ÿæç¤º

### é‡åˆ°é—®é¢˜ï¼Ÿ

1. **ç±»å‹é”™è¯¯** â†’ æ£€æŸ¥ `tsconfig.json` çš„ `moduleResolution` è®¾ç½®
2. **ç»„ä»¶ä¸æ¸²æŸ“** â†’ ç¡®ä¿ä½¿ç”¨äº† `<ThemeProvider>` åŒ…è£¹
3. **æ ·å¼ä¸ç”Ÿæ•ˆ** â†’ Ink ä½¿ç”¨ Flexboxï¼Œæ£€æŸ¥ `flexDirection` å±æ€§
4. **æ‰¾ä¸åˆ°æ¨¡å—** â†’ è¿è¡Œ `npm install` ç¡®ä¿ä¾èµ–å®‰è£…å®Œæ•´

### è°ƒè¯•æŠ€å·§

```tsx
// åœ¨ç»„ä»¶ä¸­æ‰“å°è°ƒè¯•ä¿¡æ¯
useEffect(() => {
  console.log('Component mounted', props);
}, []);
```

### æŸ¥çœ‹ç»„ä»¶æ•ˆæœ

```bash
# è¿è¡Œæµ‹è¯•ç¤ºä¾‹
npx tsx examples/ink-test/basic-components.tsx

# åˆ›å»ºä½ è‡ªå·±çš„æµ‹è¯•æ–‡ä»¶
cp examples/ink-test/basic-components.tsx examples/ink-test/my-test.tsx
npx tsx examples/ink-test/my-test.tsx
```

---

## ğŸ“ è·å–å¸®åŠ©

### åœ¨ä»£ç ä¸­
- æŸ¥çœ‹ `INK_REFACTOR_GUIDE.md` ä¸­çš„è¯¦ç»†ç¤ºä¾‹
- å‚è€ƒå·²å®Œæˆçš„ç»„ä»¶ä»£ç ï¼ˆ`src/ink-components/ui/`ï¼‰
- è¿è¡Œæµ‹è¯•ç¤ºä¾‹äº†è§£ç”¨æ³•

### åœ¨å¯¹è¯ä¸­
éšæ—¶å¯ä»¥é—®æˆ‘ï¼š
- "XXX ç»„ä»¶åº”è¯¥å¦‚ä½•å®ç°ï¼Ÿ"
- "é‡åˆ° YYY é”™è¯¯æ€ä¹ˆåŠï¼Ÿ"
- "è¿™æ®µä»£ç æœ‰ä»€ä¹ˆé—®é¢˜ï¼Ÿ"
- "ç»§ç»­å®Œæˆä¸‹ä¸€ä¸ªç»„ä»¶"

---

## ğŸ‰ é¢„æœŸæˆæœ

å®Œæˆé‡æ„åï¼Œä½ å°†è·å¾—ï¼š

âœ¨ **æ›´ç®€æ´çš„ä»£ç **
- ä» 3000 è¡Œ â†’ 1500 è¡Œï¼ˆå‡å°‘ 50%ï¼‰

âœ¨ **æ›´å¥½çš„å¼€å‘ä½“éªŒ**
- React ç»„ä»¶åŒ–å¼€å‘
- å£°æ˜å¼ UI ç¼–ç¨‹
- TypeScript å®Œæ•´æ”¯æŒ

âœ¨ **æ›´å¼ºçš„åŠŸèƒ½**
- Flexbox å¸ƒå±€
- ç»„ä»¶å¤ç”¨
- æ˜“äºæ‰©å±•

âœ¨ **æ›´æ˜“ç»´æŠ¤**
- æ¸…æ™°çš„ç»„ä»¶ç»“æ„
- å•ä¸€èŒè´£åŸåˆ™
- å®Œæ•´çš„æµ‹è¯•è¦†ç›–

---

## ğŸ“Š è¿›åº¦è¿½è¸ª

ä½ å¯ä»¥ä½¿ç”¨è¿™ä¸ªæ¸…å•è¿½è¸ªè¿›åº¦ï¼š

```markdown
## Ink é‡æ„è¿›åº¦

### é˜¶æ®µ 1-2ï¼šåŸºç¡€è®¾æ–½å’Œ UI ç»„ä»¶
- [x] ä¾èµ–å®‰è£…
- [x] é…ç½®æ›´æ–°
- [x] Box ç»„ä»¶
- [x] Badge ç»„ä»¶
- [x] Divider ç»„ä»¶
- [x] Spinner ç»„ä»¶
- [x] useTheme Hook

### é˜¶æ®µ 3ï¼šæ ¸å¿ƒæ¸²æŸ“å™¨
- [ ] MessageRouter
- [ ] SystemMessage
- [ ] AssistantMessage
- [ ] ToolUseMessage (å¯é€‰ï¼Œåˆå¹¶åˆ° AssistantMessage)
- [ ] ToolResultMessage
- [ ] FinalResult
- [ ] InkRenderer

### é˜¶æ®µ 4ï¼šé«˜çº§ç‰¹æ€§
- [ ] StreamRenderer
- [ ] API å…¼å®¹å±‚
- [ ] æ€§èƒ½ä¼˜åŒ–

### é˜¶æ®µ 5ï¼šæµ‹è¯•å’Œæ–‡æ¡£
- [ ] å•å…ƒæµ‹è¯•
- [ ] é›†æˆæµ‹è¯•
- [ ] ç¤ºä¾‹æ›´æ–°
- [ ] æ–‡æ¡£å®Œå–„
```

---

**å‡†å¤‡å¥½äº†å—ï¼Ÿå¼€å§‹ä½ çš„ Ink é‡æ„ä¹‹æ—…ï¼** ğŸš€

æœ‰ä»»ä½•é—®é¢˜éšæ—¶é—®æˆ‘ï¼
